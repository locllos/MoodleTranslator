FLAGS = -g3 -fsanitize=address

all: main
	-rm -rf bin/*.o

main: bin/hashTable.o bin/Array.o bin/Translator_asm.o bin/Parser.o
	gcc $(FLAGS) src/main.cpp bin/hashTable.o bin/Array.o bin/Translator_asm.o bin/Parser.o -o main

bin/hashTable.o: src/hashTable/hashTable.cpp
	gcc $(FLAGS) -c src/hashTable/hashTable.cpp -o bin/hashTable.o

bin/Array.o: src/Array/Array.cpp
	gcc $(FLAGS) -c src/Array/Array.cpp -o bin/Array.o

bin/Translator_asm.o:  bin/Translator.o bin/HolyPoly_asm.o
	gcc $(FLAGS) -c bin/HolyPoly_asm.o bin/Translator.o -o bin/Translator_asm.o

bin/Translator.o: src/Translator/Translator.cpp
	gcc $(FLAGS) -c src/Translator/Translator.cpp -o bin/Translator.o

bin/HolyPoly_asm.o:
	nasm -felf64 src/Translator/HolyPoly_asm.nasm -o bin/HolyPoly_asm.o

bin/Parser.o: src/Parser/Parser.cpp
	gcc $(FLAGS) -c src/Parser/Parser.cpp -o bin/Parser.o

